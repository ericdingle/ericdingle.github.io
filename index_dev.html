<!DOCTYPE html>
<html>
  <heaD>
    <title>Eric Dingle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="import" href="bower_components/polymer/polymer.html">
    <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="bower_components/app-layout/app-drawer/app-drawer.html">
    <link rel="import" href="bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
    <link rel="import" href="bower_components/app-layout/app-header/app-header.html">
    <link rel="import" href="bower_components/app-layout/app-header-layout/app-header-layout.html">
    <link rel="import" href="bower_components/app-route/app-location.html">
    <link rel="import" href="bower_components/app-route/app-route.html">
    <link rel="import" href="bower_components/iron-icon/iron-icon.html">
    <link rel="import" href="bower_components/iron-icons/hardware-icons.html">
    <link rel="import" href="bower_components/iron-icons/image-icons.html">
    <link rel="import" href="bower_components/iron-icons/iron-icons.html">
    <link rel="import" href="bower_components/iron-pages/iron-pages.html">
    <link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="bower_components/paper-item/paper-icon-item.html">
    <link rel="import" href="bower_components/paper-menu/paper-menu.html">
    <link rel="import" href="listing-page.html">
    <link rel="import" href="markdown-page.html">
    <style>
    :root {
      --bg-color: #484848;
      --font-color: #FFF;
      --link-color: #73B136;
    }

    body {
      background-color: var(--bg-color);
      color: var(--font-color);
      font-family: Arial, Helvetica, sans-serif;
    }
    a {
      color: var(--link-color);
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    p {
      font-family: medium-content-serif-font, Georgia, Cambria, "Times New Roman", Times, serif;
      line-height: 1.5;
    }
    </style>
    <style is="custom-style">
    :root {
      --bg-color: #484848;
      --font-color: #FFF;
      --link-color: #73B136;
    }

    app-drawer {
      --app-drawer-content-container: {
        background-color: var(--bg-color);
      };
      text-align: center;
    }
    app-drawer img {
      border-radius: 75px;
      margin: 10px;
    }

    paper-menu {
      --paper-menu-background-color: var(--bg-color);
      --paper-menu-color: var(--font-color);
      --paper-menu-selected-item: {
        background-color: var(--link-color);
      };
    }
    paper-icon-item {
      cursor: pointer;
    }

    #main {
      max-width: 1000px;
    }

    app-header {
      background-color: var(--bg-color);
    }
    paper-icon-button {
      float: right;
    }
    </style>
  </head>
  <body>
    <template is="dom-bind" id="scope">
      <app-location route="{{route}}" use-hash-as-path></app-location>
      <app-route route="{{route}}" pattern="/:value" data="{{page}}" tail="{{tail}}"></app-route>

      <app-drawer-layout>
        <app-drawer id="drawer" opened="{{opened}}" swipe-open>
          <img src="/images/ericdingle.jpg" width="150" height="150">
          <div id="drawer-content">
            <paper-menu attr-for-selected="page" selected="{{page.value}}" on-iron-activate="onMenuActivate">
              <template is="dom-repeat" items='[["Coding Blog", "coding-blog", "assignment"],
                                                ["Coding Projects", "coding-projects", "hardware:keyboard"],
                                                ["Building Projects", "building-projects", "build"],
                                                ["Guitar Tabs", "guitar-tabs", "image:music-note"],
                                                ["About", "about", "info"]]'>
                <paper-icon-item page="{{item.1}}">
                  <iron-icon icon="{{item.2}}" item-icon></iron-icon>{{item.0}}
                </paper-icon-item>
              </template>
            </paper-menu>
          </div>
        </app-drawer>
        <div id="main">
          <app-header-layout>
            <app-header fixed>
              <template is="dom-if" if="[[!opened]]">
                <paper-icon-button icon="menu" on-tap="openDrawer"></paper-icon-button>
              </template>
              <h1>Eric Dingle</h1>
              <p>With programming my mind I flex.</p>
            </app-header>
            <iron-pages attr-for-selected="page" selected="[[page.value]]">
              <listing-page title="Coding Blog" page="coding-blog" route="[[tail]]" sort-by="timestamp" sort-desc></listing-page>
              <listing-page title="Coding Projects" page="coding-projects" route="[[tail]]" sort-by="title"></listing-page>
              <listing-page title="Building Projects" page="building-projects" route="[[tail]]" sort-by="timestamp" sort-desc></listing-page>
              <listing-page title="Guitar Tabs" page="guitar-tabs" route="[[tail]]" sort-by="title"></listing-page>
              <markdown-page page="about" path="/about.md"></markdown-page>
            </iron-pages>
          </app-header>
        </div>
      </app-drawer-layout>
    </template>

    <script>
      var scope = document.getElementById('scope');

      addEventListener('WebComponentsReady', function() {
        if (!scope.route.path) {
          scope.set('route.path', '/coding-blog');
        }
      });

      scope.onMenuActivate = function() {
        if (!scope.$.drawer.persistent)
          scope.$.drawer.close();

        scope.set('tail.path', '');
      };

      scope.openDrawer = function() {
        scope.$.drawer.open();
      };

      // Google Analytics init.
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-83209989-2', 'auto');

      scope.addEventListener('route-changed', function(e) {
        if (e.detail.path == 'route.path') {
          ga('send', 'pageview', e.detail.value);
        }
      });
    </script>
  </body>
</html>
