<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/marked-element/marked-element.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="building-projects-header.html">
<dom-module id="markdown-page">
  <template>
    <iron-ajax id="xhr" handle-as="text" url="/content[[path]].md" loading="{{loading}}" last-response="{{response}}"></iron-ajax>
    <template is="dom-if" if="[[!loading]]">
      <marked-element id="false" markdown="{{response}}"></marked-element>
    </template>
  </template>
  <script>
  Polymer({
    is: 'markdown-page',
    properties: {
      path: String
    },
    attributeChanged: function(attr, oldVal, newVal) {
      if (attr == 'class' && newVal.indexOf('iron-selected') != -1)
        this.$.xhr.generateRequest();
    }
  });
  </script>
</dom-module>
