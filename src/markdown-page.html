<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/marked-element/marked-element.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../src/building-projects-header.html">
<dom-module id="markdown-page">
  <template>
    <iron-ajax auto handle-as="text" url="[[markdownPath]]" loading="{{loading}}" last-response="{{response}}"></iron-ajax>
    <template is="dom-if" if="[[!loading]]">
      <marked-element id="false" markdown="{{response}}"></marked-element>
    </template>
  </template>
  <script>
    Polymer({
      is: 'markdown-page',
      properties: {
        path: String,
        selected: Boolean,
        markdownPath: {
          type: String,
          computed: 'computeMarkdownPath(selected, path)'
        }
      },
      attributeChanged: function(attr, oldVal, newVal) {
        if (attr == 'class')
          this.selected = newVal.indexOf('iron-selected') != -1;
      },
      computeMarkdownPath: function(selected, path) {
        return selected && path ? '/data' + path + '.md' : null;
      }
    });
  </script>
</dom-module>
