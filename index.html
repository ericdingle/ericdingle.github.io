<!DOCTYPE html>
<html>
  <heaD>
    <title>Eric Dingle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="/bower_components/carbon-route/carbon-location.html">
    <link rel="import" href="/bower_components/carbon-route/carbon-route.html">
    <link rel="import" href="/bower_components/iron-icon/iron-icon.html">
    <link rel="import" href="/bower_components/iron-icons/hardware-icons.html">
    <link rel="import" href="/bower_components/iron-icons/image-icons.html">
    <link rel="import" href="/bower_components/iron-icons/iron-icons.html">
    <link rel="import" href="/bower_components/iron-pages/iron-pages.html">
    <link rel="import" href="/bower_components/paper-drawer-panel/paper-drawer-panel.html">
    <link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="/bower_components/paper-item/paper-icon-item.html">
    <link rel="import" href="/bower_components/paper-menu/paper-menu.html">
    <link rel="import" href="/listing-page.html">
    <link rel="import" href="/markdown-page.html">
    <style>
    body {
      font-family: 'Oswald', Helvetica, sans-serif;
      font-color: #333;
    }
    a {
      color: #7ccdea;
      text-decoration: none;
    }

    #drawer-header {
      font-size: 12px;
      padding: 10px 0;
      text-align: center;
    }
    #drawer-header img {
      border-radius: 25px;
    }

    paper-icon-item {
      cursor: pointer;
    }
    paper-icon-item.iron-selected {
      background-color: #7ccdea;
    }
    paper-icon-item:focus iron-icon {
      color: #000;
    }

    paper-drawer-panel [main] {
      margin: 0 20px;
      max-width: 1000px;
    }
    paper-icon-button {
      float: right;
    }
    </style>
  </head>
  <body>
    <template is="dom-bind" id="scope">
      <carbon-location route="{{route}}" use-hash-as-path></carbon-location>
      <carbon-route route="{{route}}" pattern="/:page" data="{{data}}" tail="{{subroute}}"></carbon-route>
      <carbon-route route="{{subroute}}" pattern="/:path" data="{{subdata}}"></carbon-route>

      <paper-drawer-panel id="panel">
        <div drawer>
          <div id="drawer-header">
            <img src="/images/ericdingle.jpg" width="150" height="150">
            <div>With programming my mind I flex.</div>
          </div>
          <div id="drawer-content">
            <paper-menu attr-for-selected="page" selected="{{data.page}}" on-iron-activate="onMenuActivate">
              <template is="dom-repeat" items='[["Coding Blog", "coding-blog", "assignment"],
                                                ["Coding Projects", "coding-projects", "hardware:keyboard"],
                                                ["Building Projects", "building-projects", "build"],
                                                ["Guitar Tabs", "guitar-tabs", "image:music-note"],
                                                ["About", "about", "info"]]'>
                <paper-icon-item page="{{item.1}}">
                  <iron-icon icon="{{item.2}}" item-icon></iron-icon>{{item.0}}
                </paper-icon-item>
              </template>
            </paper-menu>
          </div>
        </div>
        <div main>
          <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
          <iron-pages attr-for-selected="page" selected="[[data.page]]" fallback-selection="404">
            <listing-page page="coding-blog" path="{{subdata.path}}"></listing-page>
            <markdown-page page="about" markdown-path="/about.markdown"></markdown-page>
            <div page="404">Not Found</div>
          </iron-pages>
        </div>
      </paper-drawer-panel>
    </template>

    <script>
      var scope = document.getElementById('scope');

      addEventListener('WebComponentsReady', function() {
        if (!scope.route.path) {
          scope.set('route.path', '/coding-blog');
        }
      });

      scope.onMenuActivate = function() {
        scope.$.panel.togglePanel();
        scope.set('subroute.path', '');
        // carbon-route doesn't reset data when path is route path unset.
        scope.set('subdata.path', '');
      };
    </script>
  </body>
</html>
